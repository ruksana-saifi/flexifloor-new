{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-price.css' | asset_url | stylesheet_tag }}

<style>
  @media screen and (min-width: 1550px) {
    .container, .page-width {
      padding-left: 8rem;
      padding-right: 8rem;
    }
  }
</style>

<style>
  .sectio-header { margin-bottom: 40px; }
  .sectio-header .main_heading { margin-bottom: 0;  font-size: 40px; line-height: 1.12; }
  
  @media screen and (max-width: 989px) {
  .sectio-header { margin-bottom: 30px; }
  .sectio-header .main_heading { margin-bottom: 0;  font-size: 36px; line-height: 1.12; }
  }
    
  .sectio-header.has-slider-nav { display: flex; justify-content: space-between; }
  .has-slider-nav .slide-nav { display: flex; gap: 0 30px; margin-top: 7px; }
  .has-slider-nav .slide-nav .nav-btn { width: 40px; height: 40px; cursor: pointer; }
  .has-slider-nav .nav-btn.swiper-button-disabled { opacity: 0.2; pointer-events: none; }
  .has-slider-nav .slide-nav svg { width: 100%; height: 100%; }
    
  .makro-PC-grid { list-style-type: none; padding-inline-start: 0; margin-block: 0; display: flex; flex-wrap: wrap; flex-direction: row; --grid-desktop-horizontal-spacing: 40px; --grid-desktop-vertical-spacing: 40px; }
  .sectio-header + .makro-product-carousel { margin-block-start: 40px; }
  
  .swiper-initialized .makro-PC-grid { flex-wrap: nowrap; gap: 0; }
  
  .makro-product--card .card__inner {background: transparent;margin-inline: auto;max-width: 290px;margin-top: 30px;}
  .makro-product--card .ratio::before { padding-bottom: var(--ratio-percent); min-height: 290px; }
  .makro-product--card .card__inner .card__media .placeholder-svg, .makro-product--card .card__inner .card__media .img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; }
  .makro-product--card .card__content .card__information { padding-top: 20px; padding-bottom: 20px; }
  .makro-product--card .card__heading { font-size: 16px; font-weight: 700; line-height: 1.5; font-family: inherit; letter-spacing: normal; }
  
  .card .card__heading_wrap { display: flex; gap: 0 20px; }
  .card .card__heading_wrap .card__heading {flex: 1 1 auto;}
  .card .card__heading_wrap .price { flex: 0 0 auto; }
  .card__heading .caption-large { font-size: 12px; font-weight: 400; }
  .card .card__heading_wrap>.price { text-align: right; }
  
  .card .price { font-size: 16px; line-height: 1.5; letter-spacing: normal; }
  .card .price .price__sale .price-item--last,
  .card .price .price__container>.price__regular { font-weight: 700; }
  .card .price__sale .price-item--regular { font-size: inherit; color: #CCCCCC; margin-right: 0; }
  
  .card-product-new>.media-content {  position: absolute; }  
  .card-product-new>.media-content ul { padding-left: 0; list-style-type: none; display: flex; gap: 5px 0; flex-direction: column; }
  
  .card .card__inner .card__media .media-content,
  .card-product-new>.media-content { bottom: auto; left: 10px; top: 10px; width: auto; }
  .card-product-new>.media-content .card--label { font-size: 12px; line-height: 1; }
  .card .card__inner .card__media .media-content .card--label,
  .card-product-new>.media-content .card--label { padding: 3px 8px 5px; letter-spacing: 0.05em; color: #000000; text-transform: uppercase; border-radius: 5px; }
  .card .card__inner .card__media .media-content .card--label.card--label-sale,
  .card-product-new>.media-content .card--label.card--label-sale { background-color: #FA255E; color: #fff; }

  .card-product-new .product-badge { position: absolute; top: 10px; right: 10px; font-size: 0; }
  @media screen and (max-width: 749px) {
    .card-product-new .product-badge img { width: 30px; height: auto; }
    .card .card__heading_wrap { flex-direction: column; }
    .card .card__heading_wrap>.price { text-align: left; margin-top: 10px; }    
    .card .card__heading_wrap>.price--on-sale .price__sale { display: flex; gap: 5px; }
    .card .card__heading_wrap>.price--on-sale .price-item--last { order: -1; }
  }
    
  @media screen and (max-width: 989px) {
    .sectio-header + .makro-product-carousel { margin-block-start: 30px; }
    .makro-product-carousel {
      margin-inline: -3.2rem;
    }
    .makro-PC-grid.swiper-wrapper {
      flex-wrap: nowrap;
      overflow-y: hidden;
    }
    .makro-product-carousel .makro-PC-grid.swiper-wrapper .makro-PC-grid__item:first-child {
       margin-inline-start: 3.2rem;
    }
    .makro-product-carousel .makro-PC-grid.swiper-wrapper .makro-PC-grid__item:last-child {
       margin-inline-end: 3.2rem;
    }  
    .makro-PC-grid.swiper-wrapper .makro-PC-grid__item {
      max-width: calc(40% - var(--grid-desktop-horizontal-spacing) / 2);
    }
  }
  @media screen and (max-width: 749px) {
    .makro-PC-grid {
      --grid-mobile-horizontal-spacing: 10px;
      --grid-mobile-vertical-spacing: 10px;
    }
    .makro-product-carousel {
      margin-inline: -1.5rem;
    }
    .makro-product-carousel .makro-PC-grid.swiper-wrapper .makro-PC-grid__item:first-child {
       margin-inline-start: 1.5rem;
    }
    .makro-product-carousel .makro-PC-grid.swiper-wrapper .makro-PC-grid__item:last-child {
       margin-inline-end: 1.5rem;
    }  
    .makro-PC-grid.swiper-wrapper .makro-PC-grid__item {
      max-width: calc(39.745% - var(--grid-mobile-horizontal-spacing) / 2);
    }
  
    .makro-product--card .ratio::before {
      min-height: 170px;
      padding-bottom: 113.34%;
    }
  }
</style>


<div class="container page-width">
  <div class="sectio-header has-slider-nav">
    {% if section.settings.title != blank %}
      <h2 class="main_heading h2 text-uppercase">{{ section.settings.title }}</h2>
    {% endif %}
    <div class="slide-nav small-hide medium-hide">
      <div class="nav-btn fea-col-slide-prev prevprev">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
          <rect x="0.75" y="0.75" width="38.5" height="38.5" rx="19.25" stroke="black" stroke-width="1.5"></rect>
          <path d="M21.75 27.5L14.25 20L21.75 12.5" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
      </div>
      <div class="nav-btn fea-col-slide-next nextnext">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40" fill="none">
          <rect x="0.75" y="0.75" width="38.5" height="38.5" rx="19.25" stroke="black" stroke-width="1.5"></rect>
          <path d="M18.25 27.5L25.75 20L18.25 12.5" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
      </div>
    </div>
  </div>
  {%- liquid
     assign collection = section.settings.collection
     assign noOfProduct = section.settings.noOfProduct
  -%}
  <div class="makro-product-carousel product-carousel-slider swiper">
    <ul class="swiper-wrapper makro-PC-grid grid" role="list">
    {%- for product in collection.products limit: noOfProduct -%}
      {%- assign placeholder_image_index = forloop.index0 | modulo: 4 | plus: 1 -%}
      {%- assign placeholder_image = 'collection-apparel-' | append: placeholder_image_index -%}
      <li class="swiper-slide makro-PC-grid__item grid__item" {% if settings.animations_reveal_on_scroll %} style="--animation-order: {{ forloop.index }};"{% endif %}>
        <div class="makro-product--card">
          {% render 'card-product-new',
            card_product: product,
            media_aspect_ratio: section.settings.image_ratio,
            show_secondary_image: section.settings.show_secondary_image,
            show_vendor: false,
            show_rating: section.settings.show_rating,
            show_quick_add: false,
            section_id: section.id,
            override_title: section.settings.override_title,
            override_image: section.settings.override_image,
            placeholder_image: placeholder_image,
            hideVariant: true
          %}
        </div>
      </li>
    {%- endfor -%}    
    </ul>
  </div>  
</div>

<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    if ( window.innerWidth > 989 ){
    var mySwiper = new Swiper("#shopify-section-{{ section.id }} .makro-product-carousel", {
      slidesPerView: 2.33,
      spaceBetween: 10,
      slidesPerGroup: 2,
      speed: 900,      
      navigation: {
        nextEl: ".fea-col-slide-next",
        prevEl: ".fea-col-slide-prev",
      },
        breakpoints: {
        1200: {
          slidesPerView: 4,
          slidesPerGroup: 4,
          spaceBetween: 40,
        },
        990: {
          slidesPerView: 3,
          slidesPerGroup: 3,
          spaceBetween: 30,
        },
        750: {          
          slidesPerView: 2.33,
          slidesPerGroup: 2,
          spaceBetween: 20,
        },
      },
    });
    }
  });
</script>

{% schema %}
  {
    "name": "Title Product Carousel",
    "class":"makro-proCarousel-section m-section",
    "settings": [
      {
        "type": "text",
        "label": "Title",
        "id": "title",
        "default": "Luc Vincent Bestsellers"
      },
      {
        "type": "collection",
        "label": "Select collection",
        "id": "collection"
      },
      {
        "type": "range",
        "label": "Select no. of product to show",
        "id": "noOfProduct",
        "default": 10,
        "min": 4,
        "max": 25,
        "step": 1
      }
    ],
    "presets": [
      {
        "name": "Title Product Carousel"
      }
    ]
  }
{% endschema %}